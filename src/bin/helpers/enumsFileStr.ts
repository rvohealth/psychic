import autogeneratedFileDisclaimer from '../../helpers/autogeneratedFileDisclaimer.js'
import pascalizeFileName from '../../helpers/pascalizeFileName.js'
import enumsAndTheirValues from './enumsAndTheirValues.js'

export default async function enumsFileStr() {
  const enums = await enumsAndTheirValues()

  let enumsFileStr = autogeneratedFileDisclaimer()

  Object.keys(enums)
    .sort()
    .forEach(enumName => {
      const exportedTypeName = pascalizeFileName(enumName) + 'Values'
      const values = enums[enumName] || []

      enumsFileStr += `\
export const ${exportedTypeName} = [
  ${values
    .sort()
    .map(val => `'${val}'`)
    .join(',\n  ')}
] as const
export type ${exportedTypeName.replace(/Values^/, '')} = (typeof ${exportedTypeName})[number]

`
    })

  return enumsFileStr
}
